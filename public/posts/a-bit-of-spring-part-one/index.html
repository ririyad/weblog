<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Rimon&#39;s Weblog  | a bit of spring: part one</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.44" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.ab4b67a3ea25990fa8279f3b7ef08b61.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="a bit of spring: part one" />
<meta property="og:description" content="Spring MVC Java Configuration Hi All, This _should_ be the first in a series of &ldquo;Rimon learns Spring&rdquo; type blog posts I plan on writing as I learn bits of Spring. I am just documenting my learnings, not advising others based on what I&rsquo;ve learned.
Spring traditionally supports two types of configurations:
 XML based configuration
 Annotation-based configuration
  This post is about a bare minimum annotation-based configuration of spring MVC." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/a-bit-of-spring-part-one/" />



<meta property="article:published_time" content="2017-10-30T09:19:54&#43;00:00"/>

<meta property="article:modified_time" content="2017-10-30T09:19:54&#43;00:00"/>











<meta itemprop="name" content="a bit of spring: part one">
<meta itemprop="description" content="Spring MVC Java Configuration Hi All, This _should_ be the first in a series of &ldquo;Rimon learns Spring&rdquo; type blog posts I plan on writing as I learn bits of Spring. I am just documenting my learnings, not advising others based on what I&rsquo;ve learned.
Spring traditionally supports two types of configurations:
 XML based configuration
 Annotation-based configuration
  This post is about a bare minimum annotation-based configuration of spring MVC.">


<meta itemprop="datePublished" content="2017-10-30T09:19:54&#43;00:00" />
<meta itemprop="dateModified" content="2017-10-30T09:19:54&#43;00:00" />
<meta itemprop="wordCount" content="634">



<meta itemprop="keywords" content="annotation,configuration,java,servlet,spring,spring-mvc," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="a bit of spring: part one"/>
<meta name="twitter:description" content="Spring MVC Java Configuration Hi All, This _should_ be the first in a series of &ldquo;Rimon learns Spring&rdquo; type blog posts I plan on writing as I learn bits of Spring. I am just documenting my learnings, not advising others based on what I&rsquo;ve learned.
Spring traditionally supports two types of configurations:
 XML based configuration
 Annotation-based configuration
  This post is about a bare minimum annotation-based configuration of spring MVC."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      Rimon&#39;s Weblog
    </a>
    <div class="flex-l items-center">
      
      








    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <article class="flex-l flex-wrap justify-between mw8 center ph3 ph0-l">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">a bit of spring: part one</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2017-10-30T09:19:54Z">October 30, 2017</time>
    </header>

    <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<h2 id="spring-mvc-java-configuration">Spring MVC Java Configuration</h2>

<p>Hi All, This _should_ be the first in a series of <strong>&ldquo;<em>Rimon learns Spring&rdquo;</em></strong> type blog posts I plan on writing as I learn bits of <a href="https://spring.io/">Spring</a>.
<strong>I am just documenting my learnings, not advising others based on what I&rsquo;ve learned.</strong></p>

<p>Spring traditionally supports two types of configurations:</p>

<ul>
<li><p>XML based configuration</p></li>

<li><p>Annotation-based configuration</p></li>
</ul>

<p>This post is about a bare minimum annotation-based configuration of spring MVC.</p>

<h4 id="1-maven-dependencies">1. Maven Dependencies</h4>

<pre><code>&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;
            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
        &lt;version&gt;4.0.0-b02&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<h4 id="2-configure-dispatcherservlet">2. Configure DispatcherServlet</h4>

<pre><code>package com.rimonmostafiz.config;

import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

/**
 * @author Rimon Mostafiz
 */
public class WebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {

    protected String[] getServletMappings() {
        return new String[] {&quot;/&quot;};
    }

    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class&lt;?&gt;[] {RootConfig.class};
    }

    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class&lt;?&gt;[] {WebConfig.class};
    }
}
</code></pre>

<p>In a Servlet 3.0, If an application has any class in the classpath which implements  <code>javax.servlet.ServletContainerInitializer</code> interface, then that class is used to configure the servlet container.</p>

<p>Spring has an implementation of that interface called <code>SpringServletContainerInitializer</code> which seeks out any classes that implement <code>WebApplicationInitializer</code> and delegates to them for configuration.</p>

<p>Spring 3.2 introduced a convenient base implementation of <code>WebApplicationInitializer</code> called <code>AbstractAnnotationConfigDispatcherServletInitializer.</code></p>

<p>Because our <code>WebAppInitializer</code> Class extends <code>AbstractAnnotationConfigDispatcherServletInitializer</code> (and thus implements <code>WebApplicationInitializer</code>), it will be automatically discovered when deployed in a Servlet 3.0 container and be used to configure the servlet context.</p>

<p>WebAppInitializer overrides three methods. Let&rsquo;s talk about them a bit</p>

<p><strong><em>getServletMappings() :</em></strong></p>

<ul>
<li><p>This method Identifies one or more paths that DispatcherServlet will be mapped to.</p></li>

<li><p>In this case, it’s mapped to &ldquo;/&rdquo;, indicating that it will be the application’s default servlet.</p></li>

<li><p>It will handle all requests coming into the application.</p></li>
</ul>

<p><strong><em>getServletConfigClasses() :</em></strong></p>

<ul>
<li><p>When DispatcherServlet starts up, it creates a Spring application context and starts loading it with beans declared in the configuration files or classes that it’s given.</p></li>

<li><p>Here we are asking Dispatcher-Servlet to load its application context with beans defined in the WebConfig configuration class.</p></li>
</ul>

<p><strong><em>getRootConfigClasses() :</em></strong></p>

<ul>
<li><p>In Spring web applications, there’s often another application context.</p></li>

<li><p>This other application context is created by <code>ContextLoaderListener</code></p></li>

<li><p>Whereas DispatcherServlet is expected to load beans containing web components such as controllers, view resolvers, and handler mappings, ContextLoaderListener is expected to load the other beans in your application.</p></li>

<li><p>These beans are typically the middle-tier and data-tier components that drive the back end of the application.</p></li>
</ul>

<h4 id="3-enable-web-mvc-and-webconfig-class">3. Enable Web MVC and WebConfig.class</h4>

<pre><code>package com.rimonmostafiz.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

/**
 * @author Rimon Mostafiz
 */
@Configuration
@EnableWebMvc
@ComponentScan({&quot;com.rimonmostafiz&quot;})
public class WebConfig implements WebMvcConfigurer {

    @Bean // configure a jsp view resolver
    ViewResolver viewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix(&quot;/WEB-INF/views/&quot;);
        resolver.setSuffix(&quot;.jsp&quot;);
        resolver.setExposeContextBeansAsAttributes(true);
        return resolver;
    }

    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }
}
</code></pre>

<p>WebConfig class is annotated with</p>

<ul>
<li><p><em><strong>@Configuration</strong></em> as it is a configuration class, It indicates that a class declares one or more <code>@Bean</code> methods and may be processed by the Spring container to generate bean definitions and service requests for those beans at runtime</p></li>

<li><p><em><strong>@EnableWebMvc</strong></em> as we are using java configuration so we are using this annotation to enable Spring MVC.</p></li>

<li><p>_<strong>@ComponentScan </strong>_so that the rimonmostafiz.web package will be scanned for components.</p></li>
</ul>

<p>We have added a ViewResolver bean. It’s an InternalResourceViewResolver.
It’s configured to look for JSP files by wrapping view names with a specific prefix and suffix.
Here, prefix = &ldquo;/WEB-INF/views/&rdquo; and suffix = &ldquo;.jsp&rdquo;</p>

<p>WebConfig class implements <code>WebMvcConfigurer</code> and overrides its <code>configureDefaultServletHandling()</code> method.
By calling <code>enable()</code> on the given <code>DefaultServletHandlerConfigurer</code>, we are asking DispatcherServlet to forward requests for static resources to the servlet container’s default servlet and not to try to handle them itself.</p>

<h4 id="4-minimum-rootconfig-class">4. Minimum RootConfig.class</h4>

<pre><code>package com.rimonmostafiz.config;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;

/**
 * @author Rimon Mostafiz
 */
@Configuration
@ComponentScan(basePackages={&quot;rimonmostafiz&quot;},
        excludeFilters={@ComponentScan.Filter(type= FilterType.ANNOTATION, value=EnableWebMvc.class)})
public class RootConfig {}
</code></pre>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/annotation" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">annotation</a>
   </li>
  
   <li class="list">
     <a href="/tags/configuration" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">configuration</a>
   </li>
  
   <li class="list">
     <a href="/tags/java" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">java</a>
   </li>
  
   <li class="list">
     <a href="/tags/servlet" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">servlet</a>
   </li>
  
   <li class="list">
     <a href="/tags/spring" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">spring</a>
   </li>
  
   <li class="list">
     <a href="/tags/spring-mvc" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">spring-mvc</a>
   </li>
  
</ul>
<div class="mt6">
        
      </div>
    </main>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/posts/manage-jdk-using-sdkman/">Manage JDK Using SDKMAN</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/installing-and-running-elasticsearch/">Installing and Running Elasticsearch</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2018 Rimon&#39;s Weblog
  </a>
  








  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
